name: Build
on:
  pull_request_target:
      types:
        - labeled
        - unlabeled
        - synchronize
        - opened
        - edited
        - ready_for_review
        - reopened
        - unlocked
  pull_request_review:
      types:
        - submitted

jobs:
  build:
    runs-on: ${{matrix.os}}
 
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macOS-latest]
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Get PR number
        uses: actions/github-script@v6
        with:
            script: |
              const prNumber = context.payload.pull_request ? context.payload.pull_request.number : null;
              if (prNumber) {
                console.log(`PR Number: ${prNumber}`);
              } else {
                console.log('No PR number available in this context.');
              }

      - name: SetUp Python
        uses: actions/setup-python@v3
        with:
          python-version: '3.8'
 
      - name: Install dependencies
        run: |
            python -m pip install --upgrade pip
            pip install -r requirements.txt
 
      - name: Run tests
        run: pytest
